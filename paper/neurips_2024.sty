% neurips_2024.sty - NeurIPS 2024 Style File
% For use with LaTeX2e

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{neurips_2024}[2024/01/01 NeurIPS 2024 submission/camera-ready style file]

\newif\if@preprint\@preprintfalse
\newif\if@final\@finalfalse
\newif\if@nonatbib\@nonatbibfalse

\DeclareOption{preprint}{\@preprinttrue}
\DeclareOption{final}{\@finaltrue}
\DeclareOption{nonatbib}{\@nonatbibtrue}
\ProcessOptions\relax

% fonts
\renewcommand{\rmdefault}{ptm}
\renewcommand{\sfdefault}{phv}

% page setup
\setlength{\paperheight}{11in}
\setlength{\paperwidth}{8.5in}

\RequirePackage[verbose=true,letterpaper]{geometry}
\AtBeginDocument{
  \newgeometry{
    textheight=9in,
    textwidth=5.5in,
    top=1in,
    headheight=12pt,
    headsep=25pt,
    footskip=30pt
  }
  \if@preprint
    \newgeometry{
      textheight=9in,
      textwidth=5.5in,
      top=1in,
      headheight=12pt,
      headsep=25pt,
      footskip=30pt
    }
  \fi
  \if@final
    \newgeometry{
      textheight=9in,
      textwidth=5.5in,
      top=1in,
      headheight=12pt,
      headsep=25pt,
      footskip=30pt
    }
  \fi
}

% line spacing
\RequirePackage{lineno}
\if@preprint\else
  \if@final\else
    \linenumbers
  \fi
\fi

% citations
\if@nonatbib\else
  \RequirePackage[numbers,sort&compress]{natbib}
\fi

% headers
\RequirePackage{fancyhdr}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\fancyfoot[C]{\thepage}
\pagestyle{fancy}

% section formatting
\RequirePackage{titlesec}
\titleformat{\section}{\large\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}{\normalsize\bfseries}{\thesubsection}{1em}{}
\titleformat{\subsubsection}{\normalsize\itshape}{\thesubsubsection}{1em}{}

% abstract
\renewenvironment{abstract}
{\vspace{-0.5em}\centerline{\large\bfseries Abstract}\vspace{0.5em}\begin{quote}}
{\end{quote}\vspace{1em}}

% anonymous submission
\if@preprint
  \newcommand{\@neuripsordinal}{Preprint}
\else
  \if@final
    \newcommand{\@neuripsordinal}{NeurIPS 2024}
  \else
    \newcommand{\@neuripsordinal}{Submitted to NeurIPS 2024}
  \fi
\fi

% title
\def\@maketitle{%
  \vbox to 2in{%
    \vspace*{\fill}
    \vskip 2em
    \begin{center}%
      {\LARGE \@title \par}%
      \vskip 1.5em%
      {\large
        \lineskip .5em%
        \begin{tabular}[t]{c}%
          \@author
        \end{tabular}\par}%
    \end{center}%
    \vskip 1.5em
    \vspace*{\fill}
  }
}

\endinput
